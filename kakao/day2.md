처음 설치부터 클러스터 관리까지, 3000대의 운영 노하우로 만든 카카오 Elasticsearch운영방법론 소개와 자동화 솔루션 시연
=

- 엘라스틱서치의 용도 2가지
    1. 검색엔진
    2. 분석엔진

- 사용하면서 겪은 이슈
    1. scale out 이슈
        - 마스터, 데이터 노드로 분리하여 해결
    2. bad neighborhood 이슈
        - 글로벌 서버 로드밸런서 도입 -> IDC별 로드밸런서
        - 이슈는 해결했지만 비용 문제를 야기
        - 그래서 hot/warm데이터 구성으로 해결
            - 이렇게 한 이유는 데이터 분석 경향상 최근 데이터를 자주 보기 때문
            - hot 데이터 노드 먼저 색인
            - 내부적으로 설정한 기간이 넘어가면 warm데이터 노드로 인덱스의 샤드 이동
    3. full gc 이슈
        - 재시작밖에 답이 없음
        - full gc가 일어나지 않도록 관리할 수밖에 없음...

- 운영방법 및 자동화
    - carrier, observer, QBES, ansible, AWX 활용

- 샤드 플랜
    - 노드간 디스크 사용량 불균형
    - 샤드 계획 없이 생성된 인덱스는 추가된 샤드를 할당받지 못함
    - 이 문제를 해결하기 위한 방법
        1. 샤드 카운트 = 노드 카운트의 일치
        2. 샤드 카운트 = 노드 카운트 * 2
        3. 샤드 카운트와 노드 카운트의 최소 공배수로 구성
        
        - 성능이슈 때문에 샤드 갯수가 적절한지 꼭 테스트해봐야 한다.

밑바닥부터 시작하는 쇼핑 데이터 엔지니어링 고군 분투기
=

- 초기 서비스 구조는 극히 단순
    - (WEB) -> WAS(APP) -> DB
- 그러나 서비스가 커지면...DB가 아프다. 이때부터 DB가용성을 확보하기 위해 고군분투
- 카카오팀에서는 DB조인 쿼리를 제거하는 것으로 결정
    - ID기반 셀렉트로 변경(비용은 낮추고, 속도는 높임)
    - ETL프로세스에서 RDB 처리
    - ES에 적재
- 데이터 변경 감지가 필요할 경우
    - 테이블에 ON UPDATE ACTION제약조건을 추가하여 modified_at컬럼을 업데이트

- 실시간 데이터 처리
    - APP -> Kafka -> ETL -> ES

- 이렇게 구성할 경우의 문제점
    1. 동일 주문의 경우, 순서보장이 필요
        -> 클라에서 처리해야 함. 2의 처리로 순서가 상관 없게 됨
    2. 순서가 보장되어도 순간적으로 과거 상태로 회귀
        -> 카프카로 ID만 받고 상태는 ETL에서 처리하는 걸로 해결
    3. ES의 색인을 응용에서 채워줘야 함

- 위 문제점을 해결하기 위해 아래와 같이 처리 구현
    - 스파크 사용
        - 사용이유 : 배치, 실시간 처리 지원 + 모니터링 툴 지원
        - 배치는 Hopping방식 채택
            - 윈도우로 시간을 나누는 방법중 하나로서 일부러 약간의 시간을 겹치도록 처리하는 것
            - 이렇게 하는 이유는 혹시라도 누락되는 부분이 있을까봐 심리적 안정감을 얻기 위함이라고 한다

- 운영시에는..
    - 서비스에서 ES는 alias만 바라보도록 설정할 것

카카오에서는 어떻게 OpenJDK를 활용하고 있을까?
=

- 오라클의 경우처럼 추후 기업의 사정에 의해 유료 정책이 될 확률이 가장 낮은 OpenJDK를 선택
    - 그 결과, AdoptOpenJDK선택
    - 선택 이유
        - 커뮤니티 기반
        - TCK 통과
        - 자체 테스트 존재
        - 업데이트 속도

- 전사적 관리를 위해 자바 버전을 수집하고 관리하는 플랫폼이 존재
    - 버전에 따라 등급을 두고 등급에 따라 여러가지 권장 조치를 제안함


Klaytn 성능 향상 대장정 -1000만 account 극복기
=

- 블록체인에 대해 사전지식이 없어서 발표 내용이 깊이 와닿진 않았음
- 하지만 종합적으로 정리해보면, 속도를 개선하기 위해 아래와 같은 처리를 하였음
    1. 캐시 레이어를 삽입한다.
    2. 디비 엑세스를 최대한 줄인다.
    3. 캐시 히트를 최대한 높인다.
    4. 디비 엑세스를 시리얼하게 하는 부분이 있다면 병렬처리로 바꾼다.
    5. 롤백이나 기타 복원처리를 위한 관리 영역을 좁힌다.(이 경우 사용 환경이나 정책에 따라 다르니 무작정 따라하지 말것)
- 여담이지만 1000만이란 수치는 현재 카카오톡 사용자의 20%가 온보딩했을 때를 가정했다고 한다
- 발표자료에 있던 그래프가 점차 안정화되는 걸 보면서 발표자의 뿌듯함만은 제대로 와닿았음

카카오의 오픈소스 관리 시스템 : Olive로 오픈소스를 요리하다
=

- 오픈소스 활용에서 저작권이 매우 중요해졌음
    - 구글과 오라클의 10조 규모 소송 사례
    - 기타 분쟁이 증가 추세
- 따라서 오픈소스의 라이센스를 쉽게 확인할 수 있는 관리툴이 필요해지게 되었고 Olive라는 툴을 만들게 됨
- 현재는 베타 서비스로서 카카오 내부에서만 사용중
- 해외에도 이미 유사 서비스가 존재함
    - 카카오에서 수집한 라이센스 정보와 겹치는 것이 많음
    - 하지만 카카오에서 수집한 정보가 더 최신화된 것도 있음
    - 이러한 정보를 기존에 존재하던 유사 서비스에 데이터 기여를 할 예정
- 툴의 도입으로 절차가 간소화되고 기존 프로세스보다 빨리 확인이 가능
